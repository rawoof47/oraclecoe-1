<app-navbar />

<!-- Loading and Error Handling -->
<div class="container mt-5" *ngIf="isLoading || error">
  <div class="alert alert-info" *ngIf="isLoading">Loading job details...</div>
  <div class="alert alert-danger" *ngIf="error">{{ error }}</div>
</div>

<!-- Page Content -->
<div *ngIf="jobPost">
  <!-- Page Banner -->
  <div class="page-title-area two" style="background-image: url(img/page-title-bg.jpg);">
    <div class="d-table">
      <div class="d-table-cell">
        <div class="container">
          <div class="row align-items-end">
            <div class="col-lg-8 col-md-12">
              <div class="left">
                <img src="img/job-details1.png" alt="Job Illustration" />
                <h2>{{ jobPost.job_title }}</h2>
                <ul>
                  <li><i class="bx bx-briefcase"></i> {{ jobPost.employment_type }}</li>
                  <li><i class="bx bx-time"></i> Posted: {{ jobPost.created_at | date: 'mediumDate' }}</li>
                </ul>
              </div>
            </div>
            <div class="col-lg-4 col-md-12">
              <div class="right">
                <a class="cmn-btn" [routerLink]="'/apply/' + jobPost.id">Apply Now <i class="bx bx-plus"></i></a>
                <ul>
                  <li><a role="button"><i class="bx bx-heart"></i> Save</a></li>
                  <li><a role="button"><i class="bx bx-share-alt"></i> Share</a></li>
                  <li><a role="button"><i class="bx bxs-report"></i> Report</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Job Details -->
  <div class="job-details-area ptb-100">
    <div class="container">
      <div class="row">
        <!-- Main Description -->
        <div class="col-lg-8 col-md-12">
          <div class="details-item">

            <div class="details-inner" *ngIf="jobPost.job_description">
              <h3>Job Description</h3>
              <p>{{ jobPost.job_description }}</p>
            </div>

            <div class="details-inner" *ngIf="jobPost.role_summary">
              <h3>Role Summary</h3>
              <p>{{ jobPost.role_summary }}</p>
            </div>

            <div class="details-inner" *ngIf="jobPost.preferred_qualifications">
              <h3>Preferred Qualifications</h3>
              <p>{{ jobPost.preferred_qualifications }}</p>
            </div>

            <div class="details-inner" *ngIf="jobPost.what_we_offer">
              <h3>What We Offer</h3>
              <p>{{ jobPost.what_we_offer }}</p>
            </div>

            <div class="details-inner" *ngIf="jobPost.how_to_apply">
              <h3>How to Apply</h3>
              <p>{{ jobPost.how_to_apply }}</p>
            </div>

          </div>
        </div>

        <!-- Sidebar -->
        <div class="col-lg-4 col-md-12">
          <div class="widget-area">
            <div class="information widget-item">
              <h3>Job Information</h3>
              <ul>
                <li *ngIf="jobPost.location">
                  <img src="img/job-details-icon.png" alt="Location Icon" />
                  <h4>Location</h4>
                  <span>{{ jobPost.location }}</span>
                </li>

                <li *ngIf="jobPost.certifications_required">
                  <img src="img/job-details-icon.png" alt="Certification Icon" />
                  <h4>Certifications</h4>
                  <span>{{ jobPost.certifications_required }}</span>
                </li>

                <li *ngIf="jobPost.experience_min !== undefined && jobPost.experience_max !== undefined">
                  <img src="img/job-details-icon.png" alt="Experience Icon" />
                  <h4>Experience</h4>
                  <span>{{ jobPost.experience_min }} - {{ jobPost.experience_max }} years</span>
                </li>

                <li *ngIf="jobPost.employment_type">
                  <img src="img/job-details-icon.png" alt="Employment Icon" />
                  <h4>Employment Type</h4>
                  <span>{{ jobPost.employment_type }}</span>
                </li>

                <li *ngIf="jobPost.compensation_range">
                  <img src="img/job-details-icon.png" alt="Compensation Icon" />
                  <h4>Compensation Range</h4>
                  <span>{{ jobPost.compensation_range }}</span>
                </li>

                <li *ngIf="jobPost.notice_period">
                  <img src="img/job-details-icon.png" alt="Notice Icon" />
                  <h4>Notice Period</h4>
                  <span>{{ jobPost.notice_period }}</span>
                </li>

                <li *ngIf="jobPost.work_mode">
                  <img src="img/job-details-icon.png" alt="Work Mode Icon" />
                  <h4>Work Mode</h4>
                  <span>{{ jobPost.work_mode }}</span>
                </li>

                <li *ngIf="jobPost.application_deadline">
                  <img src="img/job-details-icon.png" alt="Deadline Icon" />
                  <h4>Deadline</h4>
                  <span>{{ jobPost.application_deadline | date: 'mediumDate' }}</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Video Popup Overlay -->
  <div class="popup-video" *ngIf="isOpen">
    <div class="overlay" (click)="closePopup()"></div>
    <div class="video-content">
      <button class="close-btn" (click)="closePopup()">X</button>
      <!-- Optional embedded video iframe goes here -->
    </div>
  </div>
</div>

<app-footer />
<app-back-to-top />
