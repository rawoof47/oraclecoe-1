<app-navbar />

<app-page-banner
  [pageTitle]="'Jobs'"
  [backgroundImage]="'img/page-title-bg.jpg'"
/>

<div class="job-area-list ptb-100">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-12">
        <ul class="job-list-item align-items-center">
          <li>
            <a routerLink=".">Results Found <span>({{ jobs.length }})</span></a>
            <a class="rss" routerLink="/"><i class='bx bx-rss'></i>RSS Feed</a>
          </li>
          <li>
            <span class="sort">Sort By:</span>
            <form>
              <div class="form-group">
                <select (change)="onSortChange($event)">
                  <option value="title">Title</option>
                  <option value="date">Date</option>
                </select>
              </div>
            </form>
          </li>
        </ul>

        <!-- Job Listings -->
        <div *ngIf="!loading && jobs.length > 0">
          <div *ngFor="let job of jobs" class="employer-item">
            <a [routerLink]="['/job-details', job.id]">
              <img [src]="job.image_url || 'img/home-one/job1.png'" alt="Employer" />
              <h3>{{ job.job_title }}</h3>
              <ul>
                <li><i class="flaticon-send"></i> {{ job.location || 'Not specified' }}</li>
                <li>{{ formatPostedDate(job.created_at) }}</li>
              </ul>
              <p>{{ job.job_description || 'No description provided.' }}</p>
              <span class="span-one">{{ job.modules_required || 'General' }}</span>
              <span class="span-two">{{ job.employment_type || 'N/A' }}</span>
            </a>
          </div>
        </div>

        <div *ngIf="loading" class="text-center mt-5">
          <p>Loading jobs...</p>
        </div>
        <div *ngIf="!loading && jobs.length === 0" class="text-center mt-5">
          <p>No job posts found.</p>
        </div>

      </div>
    </div>
  </div>
</div>

<app-footer />
<app-back-to-top />
