<!-- single-resume.component.html -->
<app-navbar />

<app-page-banner
  [pageTitle]="'My Resume'"
  [backgroundImage]="'img/page-title-bg.jpg'"
/>

<!-- Single Resume -->
<div class="person-details-area resume-area ptb-100">
  <div class="container">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="text-center py-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-3">Loading profile data...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="!isLoading && errorMessage" class="alert alert-danger text-center">
      {{ errorMessage }}
    </div>

    <!-- Profile Data -->
    <div *ngIf="!isLoading && !errorMessage && candidateProfile && user" class="row">
      <div class="col-lg-4 col-md-12">
        <div class="widget-area">
          <!-- Profile Box -->
          <div class="resume-profile">
            <img src="img/dashboard1.jpg" alt="Profile" />
            <h2>
              {{ user.first_name }}
              {{ user.middle_name ? user.middle_name + ' ' : '' }}
              {{ user.last_name }}
            </h2>
          </div>

          <!-- Overview Section -->
          <div class="information widget-item">
            <h3>Overview</h3>
            <ul>
              <!-- Email -->
              <li>
                <img src="img/job-details-icon.png" alt="Email" />
                <h4>Email:</h4>
                <span>{{ user.email }}</span>
              </li>

              <!-- Experience -->
              <li *ngIf="candidateProfile.experience_years">
                <img src="img/job-details-icon.png" alt="Experience" />
                <h4>Experience:</h4>
                <span>{{ candidateProfile.experience_years }} years</span>
              </li>

              <!-- Gender -->
              <li *ngIf="candidateProfile.gender">
                <img src="img/job-details-icon.png" alt="Gender" />
                <h4>Gender:</h4>
                <span>{{ candidateProfile.gender }}</span>
              </li>

              <!-- Notice Period -->
              <li *ngIf="candidateProfile.notice_period">
                <img src="img/job-details-icon.png" alt="Notice Period" />
                <h4>Notice Period:</h4>
                <span>{{ candidateProfile.notice_period }}</span>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="col-lg-8 col-md-12">
        <div class="details-item">
          <!-- About Me -->
          <div class="profile bottom-item" *ngIf="candidateProfile.about_me">
            <h3>About Me</h3>
            <p>{{ candidateProfile.about_me }}</p>
          </div>

          <!-- Professional Summary -->
          <div class="profile bottom-item" *ngIf="candidateProfile.professional_summary">
            <h3>Professional Summary</h3>
            <p>{{ candidateProfile.professional_summary }}</p>
          </div>

          <!-- Education -->
          <div class="profile bottom-item" *ngIf="candidateProfile.education">
            <h3>Education</h3>
            <p>{{ candidateProfile.education }}</p>
          </div>

          <!-- Skills Section -->
          <div class="skills bottom-item" *ngIf="skills.length > 0">
            <h3>Skills</h3>
            <div class="skills-wrap">
              <div class="skill-tags">
                <span *ngFor="let skill of skills" class="skill-tag">
                  {{ skill }}
                </span>
              </div>
            </div>
          </div>

          <!-- Certifications Section -->
          <div class="profile bottom-item" *ngIf="certifications.length > 0">
            <h3>Certifications</h3>
            <ul class="certification-list">
              <li *ngFor="let cert of certifications">
                {{ cert }}
              </li>
            </ul>
          </div>

          

          <!-- Social Links -->
          <div class="profile bottom-item" *ngIf="candidateProfile.social_links">
            <h3>Social Links</h3>
            <div [innerHTML]="candidateProfile.social_links | linkify"></div>
          </div>

          <!-- Resume Download -->
          <div class="profile bottom-item" *ngIf="candidateProfile.resume_link">
            <h3>Resume</h3>
            <a
              [href]="candidateProfile.resume_link"
              target="_blank"
              class="btn btn-primary"
            >
              Download Resume
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading && !errorMessage && (!candidateProfile || !user)" class="text-center py-5">
      <h3>No Profile Found</h3>
      <p>Please create your candidate profile to view it here.</p>
    </div>
  </div>
</div>

<app-footer />
<app-back-to-top />