<div class="user-form-area">
  <div class="d-table">
    <div class="d-table-cell">
      <div class="container-fluid p-0">
        <div class="row m-0 align-items-center">
          <div class="col-lg-7 col-md-7 d-md-block">
            <div class="user-img" style="background-image: url('img/resgister-bg.jpg');">
              <!-- Background image -->
            </div>
          </div>
          <div class="col-lg-5 col-md-5 col-12">
            <div class="user-content">
              <div class="top">
                <h2 class="mb-4">Set a New Password</h2>

                <form [formGroup]="resetForm" (ngSubmit)="onSubmit()">
                  <!-- New Password -->
                  <div class="form-group mb-3">
                    <div class="input-group">
                      <input
                        [type]="hideNewPassword ? 'password' : 'text'"
                        class="form-control"
                        formControlName="newPassword"
                        placeholder="New Password"
                      />
                      <span
                        class="input-group-text password-tooltip"
                        matTooltip="Password must be 8+ chars with A-Z, a-z, 0-9 & symbol."
                        matTooltipPosition="right"
                        matTooltipClass="custom-tooltip"
                      >
                        ?
                      </span>
                      <span
                        class="input-group-text password-toggle"
                        (click)="hideNewPassword = !hideNewPassword"
                      >
                        <mat-icon>{{ hideNewPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                      </span>
                    </div>
                    <div *ngIf="resetForm.get('newPassword')?.touched && resetForm.get('newPassword')?.invalid" class="text-danger mt-1">
                      <small *ngIf="resetForm.get('newPassword')?.errors?.['required']">Password is required.</small>
                      <small *ngIf="resetForm.get('newPassword')?.errors?.['minlength']">Minimum 8 characters.</small>
                      <small *ngIf="resetForm.get('newPassword')?.errors?.['pattern']">
                        Requires A-Z, a-z, 0-9 & symbol.
                      </small>
                    </div>
                  </div>

                  <!-- Confirm Password -->
                  <div class="form-group mb-3">
                    <div class="input-group">
                      <input
                        [type]="hideConfirmPassword ? 'password' : 'text'"
                        class="form-control"
                        formControlName="confirmPassword"
                        placeholder="Confirm Password"
                      />
                      <span
                        class="input-group-text password-toggle"
                        (click)="hideConfirmPassword = !hideConfirmPassword"
                      >
                        <mat-icon>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                      </span>
                    </div>
                    <div *ngIf="resetForm.errors?.['mismatch'] && resetForm.get('confirmPassword')?.touched" class="text-danger mt-1">
                      <small>Passwords do not match.</small>
                    </div>
                  </div>

                  <!-- Submit Button -->
                  <button
                    type="submit"
                    class="btn btn-primary w-100"
                    [disabled]="isSubmitting || resetForm.invalid"
                  >
                    <span *ngIf="!isSubmitting">Reset Password</span>
                    <span *ngIf="isSubmitting">Submitting...</span>
                  </button>
                </form>

                <div class="switch-link mt-3 text-center">
                  <a routerLink="/login">Back to Login</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>